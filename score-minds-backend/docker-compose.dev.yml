# OVAJ FAJL SLUÅ½I SAMO ZA RAZVOJ (DEVELOPMENT)

services:
  api:
    # 1. Govorimo Dockeru da stane na 'build' fazi iz tvog Dockerfile-a
    #    To je faza GDE JOÅ  POSTOJI /src folder!
    build:
      context: .
      dockerfile: Dockerfile
      target: build # ğŸ‘ˆ KLJUÄŒNA PROMENA #1

    # 2. Ovo su tvoji "magiÄni" volumeni, i oni su savrÅ¡eni.
    #    - Prvi red: Mapira tvoj lokalni kod u kontejner.
    #    - Drugi red: Å titi node_modules unutar kontejnera od tvog lokalnog node_modules.
    volumes:
      - .:/app
      - /app/node_modules

    # 3. Govorimo kontejneru KOJU komandu da pokrene.
    #    Umesto "node dist/main", pokreÄ‡emo NestJS watch mode.
    command: npm run start:dev # ğŸ‘ˆ KLJUÄŒNA PROMENA #2

    environment:
      # 4. Dodajemo ovo kao dobru praksu
      - NODE_ENV=development 